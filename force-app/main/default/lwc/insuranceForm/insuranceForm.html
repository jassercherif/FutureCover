<template>
    <div class="form-background" >
        <div class="form-container">
            <template if:true={lead}>
                <div class="lead-form">
                    <div class="lead-card">
                       <!-- <h2 class="form-title">Lead Information Form</h2>-->

                        <!-- Vos Informations -->
                        <div class="form-section">
                            <h3 class="section-title">Your Information</h3>
                            <div class="form-row">
                                <lightning-input 
                                    label="First Name" 
                                    value={lead.firstName} 
                                    onchange={handleChange} 
                                    data-id="firstName" 
                                    required>
                                </lightning-input>
                                <lightning-input 
                                    label="Last Name" 
                                    value={lead.lastName} 
                                    onchange={handleChange} 
                                    data-id="lastName" 
                                    required>
                                </lightning-input>
                                <template if:true={errorMessages.firstName}>
                                    <p class="error-message">{errorMessages.firstName}</p>
                                </template>
                            </div>
                            <lightning-input 
                            label="Title" 
                            type="title" 
                            value={lead.title} 
                            onchange={handleChange} 
                            data-id="title" 
                            required>
                        </lightning-input>
                        <template if:true={errorMessages.title}>
                            <p class="error-message">{errorMessages.title}</p>
                        </template>
                            <div class="form-row">
                                <lightning-input 
                                label="Email" 
                                type="email" 
                                value={lead.email} 
                                onchange={handleChange} 
                                data-id="email" 
                                required>
                            </lightning-input>
                            <template if:true={errorMessages.email}>
                                <p class="error-message">{errorMessages.email}</p>
                            </template>
                                <lightning-input 
                                    label="Phone" 
                                    type="tel" 
                                    value={lead.phone} 
                                    onchange={handleChange} 
                                    data-id="phone">
                                </lightning-input>
                                <template if:true={errorMessages.phone}>
                                    <p class="error-message">{errorMessages.phone}</p>
                                </template>
                            </div>
                        </div>


                        <!-- Informations Entreprise -->
<div class="form-section">
    <h3 class="section-title">Company Details</h3>
    
    <lightning-input 
        label="Company" 
        value={lead.company} 
        onchange={handleChange} 
        data-id="company" 
        required>
    </lightning-input>
    <template if:true={errorMessages.company}>
        <p class="error-message">{errorMessages.company}</p>
    </template>

    <lightning-input 
        label="Number of Employees" 
        type="number" 
        value={lead.numEmployees} 
        onchange={handleChange} 
        data-id="numEmployees"
        required>
    </lightning-input>
    <template if:true={errorMessages.numEmployees}>
        <p class="error-message">{errorMessages.numEmployees}</p>
    </template>

    <lightning-input 
        label="Annual Revenue" 
        type="number" 
        value={lead.annualRevenue} 
        onchange={handleChange} 
        data-id="annualRevenue">
    </lightning-input>
    <template if:true={errorMessages.annualRevenue}>
        <p class="error-message">{errorMessages.annualRevenue}</p>
    </template>
    <lightning-input 
    label="Street" 
    type="text" 
    value={lead.street} 
    onchange={handleChange} 
    data-id="street">
</lightning-input>
<template if:true={errorMessages.street}>
    <p class="error-message">{errorMessages.street}</p>
</template>

<lightning-input 
    label="City" 
    type="text" 
    value={lead.city} 
    onchange={handleChange} 
    data-id="city">
</lightning-input>
<template if:true={errorMessages.city}>
    <p class="error-message">{errorMessages.city}</p>
</template>

<!--<lightning-input 
    label="State / Province" 
    type="text" 
    value={lead.state} 
    onchange={handleChange} 
    data-id="stateProvince">
</lightning-input>
<template if:true={errorMessages.stateProvince}>
    <p class="error-message">{errorMessages.stateProvince}</p>
</template>-->

<lightning-input 
    label="Postal Code" 
    type="text" 
    value={lead.postalcode} 
    onchange={handleChange} 
    data-id="postalcode">
</lightning-input>
<template if:true={errorMessages.postalcode}>
    <p class="error-message">{errorMessages.postalcode}</p>
</template>

<lightning-input 
    label="Country" 
    type="text" 
    value={lead.country} 
    onchange={handleChange} 
    data-id="country">
</lightning-input>
<template if:true={errorMessages.country}>
    <p class="error-message">{errorMessages.country}</p>
</template>



    

   
</div>

                        <br/>
                        <!-- Informations Produit et Assurance -->
                        <div class="form-section">
                            <h3 class="section-title">Product & Insurance</h3>
                            <lightning-combobox
    label="Product of Interest"
    placeholder="Select a product"
    options={productOptions}
    value={lead.productInterest}
    onchange={handleChangeProduct}
    data-id="productInterest">
</lightning-combobox>

                            <lightning-combobox 
                                label="Insurance Type" 
                                value={lead.insuranceType} 
                                options={insuranceOptions} 
                                onchange={handleChange} 
                                data-id="insuranceType">
                            </lightning-combobox>
                            <template if:true={errorMessages.insuranceType}>
                                <p class="error-message">{errorMessages.insuranceType}</p>
                            </template>
                        </div>
                        <lightning-textarea
    label="Client Needs"
    value={lead.needs}
    onchange={handleChange}
    data-id="needs"
    max-length="500"
    placeholder="Describe the client's needs here...">
</lightning-textarea>
<template if:true={errorMessages.needs}>
    <p class="error-message">{errorMessages.needs}</p>
</template>

                        <template if:true={error}>
                            <p class="error-message">{error}</p>
                        </template>

                        <!-- Bouton de soumission -->
                        <div class="submit-button">
                            <lightning-button 
                                variant="brand" 
                                label="Submit Lead" 
                                onclick={handleSubmit}>
                            </lightning-button>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </div>
</template>

